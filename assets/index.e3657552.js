var ke=Object.defineProperty,Ce=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var ce=(a,l,i)=>l in a?ke(a,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[l]=i,de=(a,l)=>{for(var i in l||(l={}))Se.call(l,i)&&ce(a,i,l[i]);if(se)for(var i of se(l))Pe.call(l,i)&&ce(a,i,l[i]);return a},pe=(a,l)=>Ce(a,je(l));import{e as L,f as Ve,u as re,g as Ne,h as Te,j as Be,k as fe,n as Ee,l as he,w as Ae,v as Fe,o as Q,m as te,p as y,q as xe,r as D,s as De,t as k,b as K,x as ne,y as G,M as me}from"./vendor.096d4912.js";var ve;const Z=typeof window!="undefined",Ie=a=>typeof a=="string",Ue=()=>{};Z&&((ve=window==null?void 0:window.navigator)==null?void 0:ve.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function oe(a){return typeof a=="function"?a():re(a)}function $e(a){return a}function ye(a){return Ne()?(Te(a),!0):!1}function Me(a,l=!0){Be()?fe(a):l?a():Ee(a)}function Le(a,l,i={}){const{immediate:_=!0}=i,C=L(!1);let w=null;function V(){w&&(clearTimeout(w),w=null)}function o(){C.value=!1,V()}function v(...O){V(),C.value=!0,w=setTimeout(()=>{C.value=!1,w=null,a(...O)},oe(l))}return _&&(C.value=!0,Z&&v()),ye(o),{isPending:Ve(C),start:v,stop:o}}function Qe(a){var l;const i=oe(a);return(l=i==null?void 0:i.$el)!=null?l:i}const qe=Z?window:void 0;Z&&window.document;const He=Z?window.navigator:void 0;Z&&window.location;function Re(...a){let l,i,_,C;if(Ie(a[0])||Array.isArray(a[0])?([i,_,C]=a,l=qe):[l,i,_,C]=a,!l)return Ue;Array.isArray(i)||(i=[i]),Array.isArray(_)||(_=[_]);const w=[],V=()=>{w.forEach(f=>f()),w.length=0},o=(f,I,T,M)=>(f.addEventListener(I,T,M),()=>f.removeEventListener(I,T,M)),v=Ae(()=>[Qe(l),oe(C)],([f,I])=>{V(),!!f&&w.push(...i.flatMap(T=>_.map(M=>o(f,T,M,I))))},{immediate:!0,flush:"post"}),O=()=>{v(),V()};return ye(O),O}function Ge(a,l=!1){const i=L(),_=()=>i.value=Boolean(a());return _(),Me(_,l),i}function We(a={}){const{navigator:l=He,read:i=!1,source:_,copiedDuring:C=1500,legacy:w=!1}=a,V=["copy","cut"],o=Ge(()=>l&&"clipboard"in l),v=he(()=>o.value||w),O=L(""),f=L(!1),I=Le(()=>f.value=!1,C);function T(){o.value?l.clipboard.readText().then(h=>{O.value=h}):O.value=J()}if(v.value&&i)for(const h of V)Re(h,T);async function M(h=oe(_)){v.value&&h!=null&&(o.value?await l.clipboard.writeText(h):W(h),O.value=h,f.value=!0,I.start())}function W(h){const u=document.createElement("textarea");u.value=h!=null?h:"",u.style.position="absolute",u.style.opacity="0",document.body.appendChild(u),u.select(),document.execCommand("copy"),u.remove()}function J(){var h,u,g;return(g=(u=(h=document==null?void 0:document.getSelection)==null?void 0:h.call(document))==null?void 0:u.toString())!=null?g:""}return{isSupported:v,text:O,copied:f,copy:M}}const le=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ue="__vueuse_ssr_handlers__";le[ue]=le[ue]||{};le[ue];var ge;(function(a){a.UP="UP",a.RIGHT="RIGHT",a.DOWN="DOWN",a.LEFT="LEFT",a.NONE="NONE"})(ge||(ge={}));var Je=Object.defineProperty,be=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,_e=(a,l,i)=>l in a?Je(a,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[l]=i,Ke=(a,l)=>{for(var i in l||(l={}))Ye.call(l,i)&&_e(a,i,l[i]);if(be)for(var i of be(l))ze.call(l,i)&&_e(a,i,l[i]);return a};const Ze={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Ke({linear:$e},Ze);var Xe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function et(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function tt(a){if(a.__esModule)return a;var l=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(a).forEach(function(i){var _=Object.getOwnPropertyDescriptor(a,i);Object.defineProperty(l,i,_.get?_:{enumerable:!0,get:function(){return a[i]}})}),l}var we={exports:{}},nt=tt(Fe);(function(a,l){(function(i,_){a.exports=_(nt)})(Xe,function(i){return function(){var _={789:function(o){o.exports=i}},C={};function w(o){var v=C[o];if(v!==void 0)return v.exports;var O=C[o]={exports:{}};return _[o](O,O.exports,w),O.exports}w.d=function(o,v){for(var O in v)w.o(v,O)&&!w.o(o,O)&&Object.defineProperty(o,O,{enumerable:!0,get:v[O]})},w.o=function(o,v){return Object.prototype.hasOwnProperty.call(o,v)},w.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var V={};return function(){w.r(V),w.d(V,{default:function(){return ee}});var o=w(789);function v(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){if(e){if(typeof e=="string")return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function f(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var c=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var S,p,E=[],N=!0,s=!1;try{for(c=c.call(n);!(N=(S=c.next()).done)&&(E.push(S.value),!r||E.length!==r);N=!0);}catch(d){s=!0,p=d}finally{try{N||c.return==null||c.return()}finally{if(s)throw p}}return E}}(e,t)||O(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function I(e){return function(t){if(Array.isArray(t))return v(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||O(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=(0,o.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var e=this.data,t=this.onClick;return(0,o.createVNode)("span",{class:"vjs-tree__brackets",onClick:t},[e])}}),W=(0,o.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(e,t){var n=t.emit;return{uiType:(0,o.computed)(function(){return e.isMultiple?"checkbox":"radio"}),model:(0,o.computed)({get:function(){return e.checked},set:function(r){return n("update:modelValue",r)}})}},render:function(){var e=this.uiType,t=this.model,n=this.$emit;return(0,o.createVNode)("label",{class:["vjs-check-controller",t?"is-checked":""],onClick:function(r){return r.stopPropagation()}},[(0,o.createVNode)("span",{class:"vjs-check-controller__inner is-".concat(e)},null),(0,o.createVNode)("input",{checked:t,class:"vjs-check-controller__original is-".concat(e),type:e,onChange:function(){return n("change",t)}},null)])}});function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(r){T(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function g(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,c=r||{},S=c.key,p=c.index,E=c.type,N=E===void 0?"content":E,s=c.showComma,d=s!==void 0&&s,m=c.length,b=m===void 0?1:m,P=u(e);if(P==="array"){var A=e.map(function(B,F,$){return g(B,"".concat(t,"[").concat(F,"]"),n+1,{index:F,showComma:F!==$.length-1,length:b,type:N})}).reduce(function(B,F){return B.concat(F)},[]);return[g("[",t,n,{showComma:!1,key:S,length:e.length,type:"arrayStart"})[0]].concat(A,g("]",t,n,{showComma:d,length:e.length,type:"arrayEnd"})[0])}if(P==="object"){var x=Object.keys(e),H=x.map(function(B,F,$){return g(e[B],B.includes(".")?"".concat(t,'["').concat(B,'"]'):"".concat(t,".").concat(B),n+1,{key:B,showComma:F!==$.length-1,length:b,type:N})}).reduce(function(B,F){return B.concat(F)},[]);return[g("{",t,n,{showComma:!1,key:S,index:p,length:x.length,type:"objectStart"})[0]].concat(H,g("}",t,n,{showComma:d,length:x.length,type:"objectEnd"})[0])}var z=Object.entries({content:e,level:n,key:S,index:p,path:t,showComma:d,length:b,type:N}).reduce(function(B,F){var $=f(F,2),Oe=$[0],ie=$[1];return ie!==void 0?h(h({},B),{},T({},Oe,ie)):B},{});return[z]}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(r){T(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Y={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},customValueFormatter:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},pathSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0}},X=(0,o.defineComponent)({name:"TreeNode",props:R(R({},Y),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,onTreeNodeClick:{type:Function},onBracketsClick:{type:Function},onSelectedChange:{type:Function}}),setup:function(e,t){var n=t.emit,r=(0,o.computed)(function(){return u(e.node.content)}),c=(0,o.computed)(function(){return"vjs-value vjs-value__".concat(r.value)}),S=(0,o.computed)(function(){return e.showDoubleQuotes?'"'.concat(e.node.key,'"'):e.node.key}),p=(0,o.computed)(function(){return e.selectableType==="multiple"}),E=(0,o.computed)(function(){return e.selectableType==="single"}),N=(0,o.computed)(function(){return e.pathSelectable(e.node.path,e.node.content)&&(p.value||E.value)}),s=function(m){var b=m+"";return r.value==="string"&&(b='"'.concat(b,'"')),b},d=e.customValueFormatter?function(m){var b;return(b=e.customValueFormatter)===null||b===void 0?void 0:b.call(e,m,e.node.key,e.node.path,s(m))}:null;return{state:(0,o.reactive)({valueClass:c,prettyKey:S,isMultiple:p,selectable:N}),defaultFormatter:s,customFormatter:d,onBracketsClickHandler:function(){e.collapsedOnClickBrackets&&n("brackets-click",!e.collapsed,e.node.path)},onCheckedChange:function(){n("selected-change",e.node)},onNodeClick:function(){n("tree-node-click",e.node),N.value&&e.selectOnClickNode&&n("selected-change",e.node)}}},render:function(){var e=this.state,t=this.node,n=this.showSelectController,r=this.highlightSelectedNode,c=this.checked,S=this.showLength,p=this.collapsed,E=this.showLine,N=this.defaultFormatter,s=this.customFormatter,d=this.onNodeClick,m=this.onCheckedChange,b=this.onBracketsClickHandler;return(0,o.createVNode)("div",{class:{"vjs-tree__node":!0,"has-selector":n,"is-highlight":r&&c},onClick:d},[n&&e.selectable&&t.type!=="objectEnd"&&t.type!=="arrayEnd"&&(0,o.createVNode)(W,{isMultiple:e.isMultiple,checked:c,onChange:m},null),Array.from(Array(t.level)).map(function(P,A){return(0,o.createVNode)("div",{key:A,class:{"vjs-tree__indent":!0,"has-line":E}},null)}),t.key&&(0,o.createVNode)("span",{class:"vjs-key"},["".concat(e.prettyKey,": ")]),(0,o.createVNode)("span",null,[t.type!=="content"?(0,o.createVNode)(M,{data:t.content,onClick:b},null):s?(0,o.createVNode)("span",{class:e.valueClass,innerHTML:s(t.content)},null):(0,o.createVNode)("span",{class:e.valueClass},[N(t.content)]),t.showComma&&(0,o.createVNode)("span",null,[","]),S&&p&&(0,o.createVNode)("span",{class:"vjs-comment"},[(0,o.createTextVNode)(" // "),t.length,(0,o.createTextVNode)(" items ")])])])}});function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(r){T(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ae=(0,o.defineComponent)({name:"Tree",props:j(j({},Y),{},{data:{type:Object,default:null},deep:{type:Number,default:1/0},deepCollapseChildren:{type:Boolean,default:!1},collapsePath:{type:RegExp,default:null},path:{type:String,default:"root"},virtual:{type:Boolean,default:!1},virtualLines:{type:Number,default:10},itemHeight:{type:Number,default:20},modelValue:{type:[String,Array],default:function(){return""}}}),emits:["click","change","update:modelValue"],setup:function(e,t){var n=t.emit,r=(0,o.ref)(),c=(0,o.reactive)({translateY:0,visibleData:null,hiddenPaths:g(e.data,e.path).reduce(function(s,d){var m=e.deepCollapseChildren?d.level>=e.deep:d.level===e.deep,b=m||e.collapsePath&&e.collapsePath.test(d.path);return d.type!=="objectStart"&&d.type!=="arrayStart"||!m&&!b?s:j(j({},s),{},T({},d.path,1))},{})}),S=(0,o.computed)(function(){var s=null;return g(e.data,e.path).reduce(function(d,m,b){var P=j(j({},m),{},{id:b}),A=c.hiddenPaths[P.path];if(s&&s.path===P.path){var x=s.type==="objectStart",H=j(j(j({},s),P),{},{content:x?"{...}":"[...]",type:x?"objectCollapsed":"arrayCollapsed"});return s=null,d.concat(H)}return A&&!s?(s=P,d):s?d:d.concat(P)},[])}),p=(0,o.computed)(function(){var s=e.modelValue;return s&&e.selectableType==="multiple"&&Array.isArray(s)?s:[s]}),E=(0,o.computed)(function(){return!e.selectableType||e.selectOnClickNode||e.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),N=function(s){if(e.virtual){var d=r.value,m=e.virtualLines,b=d&&d.scrollTop||0,P=Math.floor(b/e.itemHeight),A=P<0?0:P+m>s.length?s.length-m:P;A<0&&(A=0);var x=A+m;c.translateY=A*e.itemHeight,c.visibleData=s.filter(function(H,z){return z>=A&&z<x})}else c.visibleData=s};return(0,o.watchEffect)(function(){E.value&&function(s){throw new Error("[VueJSONPretty] ".concat(s))}(E.value)}),(0,o.watchEffect)(function(){S.value&&N(S.value)}),{tree:r,state:c,flatData:S,selectedPaths:p,onTreeScroll:function(){N(S.value)},onSelectedChange:function(s){var d=s.path,m=e.selectableType;if(m==="multiple"){var b=p.value.findIndex(function(H){return H===d}),P=I(p.value);b!==-1?P.splice(b,1):P.push(d),n("update:modelValue",P),n("change",P,I(p.value))}else if(m==="single"&&p.value[0]!==d){var A=f(p.value,1)[0],x=d;n("update:modelValue",x),n("change",x,A)}},onTreeNodeClick:function(s){var d=s.content,m=s.path;n("click",m,d)},onBracketsClick:function(s,d){if(s)c.hiddenPaths=j(j({},c.hiddenPaths),{},T({},d,1));else{var m=j({},c.hiddenPaths);delete m[d],c.hiddenPaths=m}}}},render:function(){var e=this.virtual,t=this.itemHeight,n=this.customValueFormatter,r=this.showDoubleQuotes,c=this.showLength,S=this.showLine,p=this.showSelectController,E=this.selectOnClickNode,N=this.pathSelectable,s=this.highlightSelectedNode,d=this.collapsedOnClickBrackets,m=this.state,b=this.flatData,P=this.selectedPaths,A=this.selectableType,x=this.onTreeNodeClick,H=this.onBracketsClick,z=this.onSelectedChange,B=this.onTreeScroll,F=m.visibleData&&m.visibleData.map(function($){return(0,o.createVNode)(X,{key:$.id,node:$,collapsed:!!m.hiddenPaths[$.path],"custom-value-formatter":n,"show-double-quotes":r,"show-length":c,"collapsed-on-click-brackets":d,checked:P.includes($.path),"selectable-type":A,"show-line":S,"show-select-controller":p,"select-on-click-node":E,"path-selectable":N,"highlight-selected-node":s,onTreeNodeClick:x,onBracketsClick:H,onSelectedChange:z},null)});return(0,o.createVNode)("div",{ref:"tree",class:{"vjs-tree":!0,"is-virtual":e},onScroll:B},[e?(0,o.createVNode)("div",{style:{height:"".concat(b.length*t,"px")}},[(0,o.createVNode)("div",{style:{transform:"translateY(".concat(m.translateY,"px)")}},[F])]):F])}}),ee=(0,o.defineComponent)(ae)}(),V}()})})(we);var ot=et(we.exports);const at={class:"json-container"},rt={props:{data:{type:Object,default:()=>null}},setup(a){return(l,i)=>(Q(),te("div",at,[y(re(ot),{"deep-collapse-children":!0,deep:3,path:"res",data:a.data},null,8,["data"])]))}};const lt={class:"outer-container"},ut={class:"request-body-form"},it={key:1},st=G(" Auth Token "),ct=G(" figma\u6388\u6743 "),dt=G(" \u753B\u5E03\u6570\u636E "),pt=G(" \u9996\u4E2A\u753B\u677F "),ft=G("\u83B7\u53D6\u6570\u636E"),ht=G("\u91CD\u65B0\u6388\u6743"),mt=G("\u5982\u4F55\u83B7\u53D6"),vt=["src"],bt=xe({setup(a){const l=h=>Object.keys(h).map(u=>`${encodeURIComponent(u)}=${encodeURIComponent(h[u])}`).join("&"),i="https://figma-api-server-pengyyyyy.vercel.app",_="https://pengyyyyy.github.io/figma-api-live/#/figma",C=L(null),w=L(null),V=L(!1),o=L(localStorage.getItem("figmaAuthToken"));fe(async()=>{const h=window.location.search.substring(1).split("&"),u=Object.create(null);for(let g=0;g<h.length;g++){const U=h[g].split("=");U[0]&&(u[U[0]]=U[1]?U[1]:"")}if(u.code&&!o.value){const{state:g,code:U}=u;if(localStorage.getItem("figmaAuthState")!==g)return;V.value=!0;const Y=await fetch(`https://figma-api-server-pengyyyyy.vercel.app/figma/auth?${l({code:U,redirectUri:_})}`);V.value=!1;const X=await Y.json();o.value=X.data.access_token,localStorage.setItem("figmaAuthToken",o.value)}});const v=L(1),O=he(()=>({token:[{required:v.value!==1,message:"\u8BF7\u8F93\u5165AccessToken"}],fileUrl:[{required:!0,message:"\u8BF7\u8F93\u5165fileUrl"}],ids:[{required:!0,message:"\u8BF7\u8F93\u5165"}]})),f=L({token:"",fileUrl:"",depth:0,havePath:!0,isNodes:!1,ids:""}),I=async({validateResult:h})=>{if(h!==!0)return;V.value=!0;const g=await(await Promise.all([fetch(`${i}/figma/file?${l(pe(de({},f.value),{authToken:o.value,type:v.value===1?"authToken":"personalToken"}))}`)]))[0].json();V.value=!1,C.value=g.data},T=(h="")=>{h==="reAuth"&&(localStorage.removeItem("figmaAuthToken"),o.value="");const u=`${Date.now()}`;localStorage.setItem("figmaAuthState",u),window.location.href=`https://www.figma.com/oauth?client_id=Hn8ZQBrB9AOZaGqPTRZ1w9&redirect_uri=${encodeURIComponent(_)}&scope=file_read&state=${u}&response_type=code`},{copy:M}=We(),W=h=>{var g;let u;if(h==="node"?u=C.value:h==="meta"?u=w.value:h==="first-frame"&&(u=(g=C.value.document.children[0])==null?void 0:g.children[0]),!u){me.error("\u6682\u65E0\u6570\u636E");return}M(JSON.stringify(u)),me.success("\u590D\u5236\u6210\u529F")},J=()=>{window.open("https://www.figma.com/developers/api#access-tokens")};return(h,u)=>{const g=D("t-tab-panel"),U=D("t-tabs"),R=D("t-input"),Y=D("t-tag"),X=D("t-tooltip"),q=D("t-button"),j=D("t-form-item"),ae=D("t-input-number"),ee=D("t-switch"),e=D("t-col"),t=D("t-row"),n=D("t-form"),r=D("t-loading");return Q(),te("div",lt,[De("div",ut,[y(U,{modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=c=>v.value=c)},{default:k(()=>[y(g,{value:1,label:"Auth"}),y(g,{value:2,label:"AccessToken"})]),_:1},8,["modelValue"]),y(n,{ref:(c,S)=>{S.form=c},class:"panel-inner",data:f.value,rules:re(O),"label-width":"90px",colon:!0,onSubmit:I},{default:k(()=>{var c,S;return[y(j,{label:"Token",name:"token"},{default:k(()=>[v.value===2?(Q(),K(R,{key:0,modelValue:f.value.token,"onUpdate:modelValue":u[1]||(u[1]=p=>f.value.token=p),placeholder:"\u8BF7\u8F93\u5165 Access Tokens"},null,8,["modelValue"])):(Q(),te("span",it,[o.value?(Q(),K(X,{key:0,content:o.value,placement:"right","overlay-style":{width:"250px"},"show-arrow":""},{default:k(()=>[y(Y,{theme:"primary",variant:"light"},{default:k(()=>[st]),_:1})]),_:1},8,["content"])):(Q(),K(q,{key:1,theme:"primary",type:"button",loading:V.value,onClick:T},{default:k(()=>[ct]),_:1},8,["loading"]))]))]),_:1}),y(j,{label:"\u6587\u4EF6\u94FE\u63A5",name:"fileUrl"},{default:k(()=>[y(R,{modelValue:f.value.fileUrl,"onUpdate:modelValue":u[2]||(u[2]=p=>f.value.fileUrl=p),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),y(j,{label:"\u6570\u636E\u5C42\u7EA7",name:"depth"},{default:k(()=>[y(ae,{modelValue:f.value.depth,"onUpdate:modelValue":u[3]||(u[3]=p=>f.value.depth=p),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),y(j,{"label-width":0},{default:k(()=>[y(t,{gutter:16,style:{width:"100%"}},{default:k(()=>[y(e,{span:6},{default:k(()=>[y(j,{label:"\u83B7\u53D6path",name:"havePath"},{default:k(()=>[y(ee,{modelValue:f.value.havePath,"onUpdate:modelValue":u[4]||(u[4]=p=>f.value.havePath=p),size:"large",label:["\u5F00","\u5173"]},null,8,["modelValue"])]),_:1})]),_:1}),y(e,{span:6},{default:k(()=>[y(j,{label:"\u53EA\u83B7\u53D6\u8282\u70B9",name:"isNodes"},{default:k(()=>[y(ee,{modelValue:f.value.isNodes,"onUpdate:modelValue":u[5]||(u[5]=p=>f.value.isNodes=p),size:"large",label:["\u5F00","\u5173"]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),f.value.isNodes?(Q(),K(j,{key:0,label:"\u8FC7\u6EE4\u8282\u70B9",name:"ids"},{default:k(()=>[y(R,{modelValue:f.value.ids,"onUpdate:modelValue":u[6]||(u[6]=p=>f.value.ids=p),placeholder:"\u59820:3,0:1"},null,8,["modelValue"])]),_:1})):ne("",!0),y(j,{label:"\u6570\u636E\u62F7\u8D1D"},{default:k(()=>[y(q,{disabled:!C.value,theme:"primary",variant:"outline",type:"button",onClick:u[7]||(u[7]=p=>W("node"))},{default:k(()=>[dt]),_:1},8,["disabled"]),y(q,{disabled:!C.value,theme:"primary",variant:"outline",type:"button",onClick:u[8]||(u[8]=p=>W("first-frame"))},{default:k(()=>[pt]),_:1},8,["disabled"])]),_:1}),y(j,null,{default:k(()=>[y(q,{theme:"primary",type:"submit"},{default:k(()=>[ft]),_:1}),v.value===1?(Q(),K(q,{key:0,theme:"warning",variant:"outline",type:"button",onClick:u[9]||(u[9]=p=>T("reAuth"))},{default:k(()=>[ht]),_:1})):ne("",!0),v.value===2?(Q(),K(q,{key:1,theme:"warning",variant:"outline",type:"button",onClick:J},{default:k(()=>[mt]),_:1})):ne("",!0)]),_:1}),((c=f.value)==null?void 0:c.fileUrl)&&((S=C.value)==null?void 0:S.thumbnailUrl)?(Q(),te("iframe",{key:1,class:"figma-preview-container",src:`https://www.figma.com/embed?embed_host=share&url=${f.value.fileUrl} `,allowfullscreen:""},null,8,vt)):ne("",!0)]}),_:1},8,["data","rules"])]),y(r,{size:"small",loading:V.value,"show-overlay":"",class:"loading-container"},{default:k(()=>[y(rt,{data:C.value},null,8,["data"])]),_:1},8,["loading"])])}}});export{bt as default};
